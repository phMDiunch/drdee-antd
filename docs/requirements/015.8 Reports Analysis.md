# üìà Requirements: Reports & Analysis - B√°o C√°o L·ªãch S·ª≠ & Ph√¢n T√≠ch

> **üìã STATUS: PENDING** - Giai ƒëo·∫°n 1, T√≠nh nƒÉng 8 (Ho√†n thi·ªán Core)  
> **üîó Parent**: `015 Inventory - Overview.md`  
> **üìÑ Implementation**: `src/features/inventory/reports/`  
> **‚ö†Ô∏è Dependencies**: T·∫•t c·∫£ t√≠nh nƒÉng tr∆∞·ªõc (GRN, GIN, StockMove)

## üéØ M·ª•c Ti√™u

Cung c·∫•p c√°c c√¥ng c·ª• ƒë·ªÉ:

- **Truy xu·∫•t l·ªãch s·ª≠**: Xem chi ti·∫øt bi·∫øn ƒë·ªông c·ªßa m·ªôt v·∫≠t t∆∞ qua th·ªùi gian
- **Ph√¢n t√≠ch mua h√†ng**: Th·ªëng k√™ gi√° tr·ªã nh·∫≠p theo NCC, theo m·∫∑t h√†ng
- **Ph√¢n t√≠ch chi ph√≠**: Th·ªëng k√™ xu·∫•t kho v√† chi ph√≠ theo B·ªô m√¥n, B√°c sƒ©, B·ªánh nh√¢n

## üìä Ba Nh√≥m B√°o C√°o

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1Ô∏è‚É£  TH·∫∫ KHO (Stock Card)                       ‚îÇ
‚îÇ      L·ªãch s·ª≠ chi ti·∫øt 1 v·∫≠t t∆∞                  ‚îÇ
‚îÇ      Nh·∫≠p/Xu·∫•t/T·ªìn t·ª´ng ng√†y                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  2Ô∏è‚É£  PH√ÇN T√çCH NH·∫¨P KHO (Purchase Analysis)     ‚îÇ
‚îÇ      T·ªïng h·ª£p gi√° tr·ªã mua h√†ng                  ‚îÇ
‚îÇ      Theo: NCC / M·∫∑t h√†ng / Nh√≥m                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  3Ô∏è‚É£  PH√ÇN T√çCH XU·∫§T KHO (Usage Analysis)        ‚îÇ
‚îÇ      T·ªïng h·ª£p chi ph√≠ s·ª≠ d·ª•ng v·∫≠t t∆∞            ‚îÇ
‚îÇ      Theo: B·ªô m√¥n / B√°c sƒ© / B·ªánh nh√¢n / VT     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üìã User Stories

### US-1: Truy V·∫øt (Th·∫ª Kho)

**L√† Th·ªß Kho**, khi th·∫•y t·ªìn kho c·ªßa v·∫≠t t∆∞ A sai l·ªách:

- T√¥i ch·ªçn v·∫≠t t∆∞ A v√† kho·∫£ng th·ªùi gian (th√°ng n√†y)
- Xem "Th·∫ª kho" v·ªõi t·ª´ng giao d·ªãch: ng√†y n√†o nh·∫≠p/xu·∫•t bao nhi√™u
- ƒê·ªëi chi·∫øu v·ªõi ch·ª©ng t·ª´ gi·∫•y ƒë·ªÉ t√¨m sai s√≥t

### US-2: Ph√¢n T√≠ch Mua H√†ng

**L√† Qu·∫£n L√Ω**, t√¥i mu·ªën:

- Bi·∫øt th√°ng v·ª´a r·ªìi chi bao nhi√™u ti·ªÅn nh·∫≠p h√†ng
- Xem theo NCC: NCC X nh·∫≠p bao nhi√™u, NCC Y bao nhi√™u
- Xem theo M·∫∑t h√†ng: Nh√≥m Implant nh·∫≠p bao nhi√™u ti·ªÅn

### US-3: Ph√¢n T√≠ch Chi Ph√≠

**L√† Qu·∫£n L√Ω**, t√¥i mu·ªën:

- Bi·∫øt B·ªô m√¥n N·ªôi nha ti√™u t·ªën bao nhi√™u ti·ªÅn v·∫≠t t∆∞/th√°ng
- Xem B√°c sƒ© A ƒë√£ lƒ©nh bao nhi√™u ti·ªÅn v·∫≠t t∆∞
- Top 10 v·∫≠t t∆∞ ti√™u hao nhi·ªÅu nh·∫•t (ƒë·ªÉ ki·ªÉm so√°t)

## üé® UI/UX Requirements

### 1Ô∏è‚É£ B√°o C√°o Th·∫ª Kho (Stock Card)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üìã Th·∫ª Kho - L·ªãch S·ª≠ Bi·∫øn ƒê·ªông V·∫≠t T∆∞                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Ch·ªçn v·∫≠t t∆∞ *          T·ª´ ng√†y *        ƒê·∫øn ng√†y *              ‚îÇ
‚îÇ  [Select: T√¨m VT... ‚ñº]  [üìÖ 01/01/25]   [üìÖ 31/01/25]  [Xem]   ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ IMPLANT NOBEL ACTIVE 4.3x10mm ‚îÅ‚îÅ‚îÅ          [üì• Xu·∫•t Excel] ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ Ng√†y    ‚îÇ S·ªë CT     ‚îÇ Lo·∫°i GD    ‚îÇ L√¥ NSX ‚îÇ Nh·∫≠p‚îÇ Xu·∫•t‚îÇT·ªìn‚îÇ ‚îÇ
‚îÇ  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÇ ‚îÇ
‚îÇ  ‚îÇ 01/01   ‚îÇ           ‚îÇ T·ªìn ƒë·∫ßu k·ª≥ ‚îÇ        ‚îÇ     ‚îÇ     ‚îÇ 20‚îÇ ‚îÇ
‚îÇ  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÇ ‚îÇ
‚îÇ  ‚îÇ 05/01   ‚îÇ GRN-...-10‚îÇ Nh·∫≠p mua   ‚îÇLOT123  ‚îÇ 30  ‚îÇ     ‚îÇ 50‚îÇ ‚îÇ
‚îÇ  ‚îÇ 08/01   ‚îÇ GIN-...-05‚îÇ Xu·∫•t BS    ‚îÇLOT100  ‚îÇ     ‚îÇ  5  ‚îÇ 45‚îÇ ‚îÇ
‚îÇ  ‚îÇ 10/01   ‚îÇ GIN-...-07‚îÇ Xu·∫•t BN    ‚îÇLOT100  ‚îÇ     ‚îÇ 10  ‚îÇ 35‚îÇ ‚îÇ
‚îÇ  ‚îÇ 15/01   ‚îÇ GRN-...-15‚îÇ Nh·∫≠p mua   ‚îÇLOT456  ‚îÇ 20  ‚îÇ     ‚îÇ 55‚îÇ ‚îÇ
‚îÇ  ‚îÇ 20/01   ‚îÇ GIN-...-12‚îÇ Xu·∫•t BS    ‚îÇLOT100  ‚îÇ     ‚îÇ  5  ‚îÇ 50‚îÇ ‚îÇ
‚îÇ  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÇ ‚îÇ
‚îÇ  ‚îÇ         ‚îÇ           ‚îÇ T·ªïng PS    ‚îÇ        ‚îÇ 50  ‚îÇ 20  ‚îÇ   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ         ‚îÇ           ‚îÇ T·ªìn cu·ªëi k·ª≥‚îÇ        ‚îÇ     ‚îÇ     ‚îÇ 50‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  Ghi ch√∫: C·ªôt "T·ªìn" l√† s·ªë d∆∞ l≈©y k·∫ø (Running Balance)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2Ô∏è‚É£ B√°o C√°o Ph√¢n T√≠ch Nh·∫≠p Kho

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üìä Ph√¢n T√≠ch Nh·∫≠p Kho                          [üì• Xu·∫•t Excel]  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  T·ª´ ng√†y *        ƒê·∫øn ng√†y *        Xem theo:                    ‚îÇ
‚îÇ  [üìÖ 01/01/25]   [üìÖ 31/01/25]     [Dropdown ‚ñº]  [Xem]           ‚îÇ
‚îÇ                                     - Nh√† cung c·∫•p                ‚îÇ
‚îÇ                                     - M·∫∑t h√†ng                    ‚îÇ
‚îÇ                                     - Nh√≥m v·∫≠t t∆∞                 ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ T·ªîNG H·ª¢P THEO NH√Ä CUNG C·∫§P (01/01 - 31/01) ‚îÅ‚îÅ‚îÅ             ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ Nh√† Cung C·∫•p          ‚îÇ S·ªë l·∫ßn nh·∫≠p ‚îÇ T·ªïng SL ‚îÇ T·ªïng GT   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ABC Medical Supply    ‚îÇ     5       ‚îÇ   150   ‚îÇ 50,000,000‚îÇ ‚îÇ
‚îÇ  ‚îÇ XYZ Labo              ‚îÇ     3       ‚îÇ    80   ‚îÇ 30,000,000‚îÇ ‚îÇ
‚îÇ  ‚îÇ MNO Implant           ‚îÇ     2       ‚îÇ    45   ‚îÇ 25,000,000‚îÇ ‚îÇ
‚îÇ  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ ‚îÇ
‚îÇ  ‚îÇ T·ªîNG C·ªòNG             ‚îÇ    10       ‚îÇ   275   ‚îÇ105,000,000‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  üí° Tip: Click v√†o NCC ƒë·ªÉ xem chi ti·∫øt c√°c phi·∫øu nh·∫≠p            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3Ô∏è‚É£ B√°o C√°o Ph√¢n T√≠ch Xu·∫•t Kho

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üìä Ph√¢n T√≠ch Xu·∫•t Kho & Chi Ph√≠                [üì• Xu·∫•t Excel]  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  T·ª´ ng√†y *        ƒê·∫øn ng√†y *                                     ‚îÇ
‚îÇ  [üìÖ 01/01/25]   [üìÖ 31/01/25]                                   ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  ƒê·ªëi t∆∞·ª£ng:       Xem theo:                                      ‚îÇ
‚îÇ  [Dropdown ‚ñº]     [Dropdown ‚ñº]                  [Xem]            ‚îÇ
‚îÇ  - T·∫•t c·∫£         - B·ªô m√¥n                                       ‚îÇ
‚îÇ  - Ch·ªâ BS/NV      - B√°c sƒ©/Nh√¢n vi√™n                             ‚îÇ
‚îÇ  - Ch·ªâ BN         - B·ªánh nh√¢n                                    ‚îÇ
‚îÇ                   - M·∫∑t h√†ng                                     ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ CHI PH√ç THEO B·ªò M√îN (01/01 - 31/01) ‚îÅ‚îÅ‚îÅ                    ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ B·ªô M√¥n        ‚îÇ T·ªïng SL Xu·∫•t ‚îÇ T·ªïng Gi√° V·ªën ‚îÇ % T·ªïng     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ ‚îÇ
‚îÇ  ‚îÇ N·ªôi nha       ‚îÇ     320      ‚îÇ  15,000,000  ‚îÇ   37.5%    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Implant       ‚îÇ      45      ‚îÇ  12,000,000  ‚îÇ   30.0%    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Ph·ª•c h√¨nh     ‚îÇ     180      ‚îÇ   8,000,000  ‚îÇ   20.0%    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Ch·ªânh nha     ‚îÇ     120      ‚îÇ   5,000,000  ‚îÇ   12.5%    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ ‚îÇ
‚îÇ  ‚îÇ T·ªîNG C·ªòNG     ‚îÇ     665      ‚îÇ  40,000,000  ‚îÇ  100.0%    ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  üìä [Bi·ªÉu ƒë·ªì Pie Chart: Ph√¢n b·ªë chi ph√≠ theo b·ªô m√¥n]            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß Functional Requirements

### FR-1: T√≠nh NƒÉng Chung (All Reports)

1. **Kho·∫£ng th·ªùi gian**: B·∫Øt bu·ªôc ch·ªçn "T·ª´ ng√†y - ƒê·∫øn ng√†y"
2. **Xu·∫•t Excel**: T·∫•t c·∫£ b√°o c√°o ƒë·ªÅu c√≥ n√∫t xu·∫•t Excel
3. **S·∫Øp x·∫øp**: S·ª≠ d·ª•ng Antd Table sorter cho c√°c c·ªôt s·ªë
4. **Ph√¢n trang**: √Åp d·ª•ng pagination n·∫øu > 50 d√≤ng

### FR-2: B√°o C√°o Th·∫ª Kho - Logic

**Ngu·ªìn d·ªØ li·ªáu**: B·∫£ng `StockMove` (L·ªãch s·ª≠ giao d·ªãch)

**C√°c b∆∞·ªõc x·ª≠ l√Ω**:

1. **T√≠nh T·ªìn ƒê·∫ßu K·ª≥**:

   ```sql
   SELECT SUM(quantityChange) as openingBalance
   FROM StockMove
   WHERE materialId = :materialId
     AND transactionDate < :startDate
   ```

2. **L·∫•y Giao D·ªãch Trong K·ª≥**:

   ```sql
   SELECT *
   FROM StockMove
   WHERE materialId = :materialId
     AND transactionDate BETWEEN :startDate AND :endDate
   ORDER BY transactionDate ASC, id ASC
   ```

3. **T√≠nh Running Balance**:
   - Loop qua t·ª´ng d√≤ng
   - `currentBalance = previousBalance + quantityChange`

### FR-3: Ph√¢n T√≠ch Nh·∫≠p Kho - Logic

**Ngu·ªìn d·ªØ li·ªáu**: `GoodsReceiptDetail` + `GoodsReceipt`

**Group By Options**:

#### A. Theo Nh√† Cung C·∫•p

```sql
SELECT
  s.name as supplierName,
  COUNT(DISTINCT gr.id) as receiptCount,
  SUM(grd.quantity) as totalQuantity,
  SUM(grd.totalAmount) as totalValue
FROM GoodsReceiptDetail grd
JOIN GoodsReceipt gr ON grd.goodsReceiptId = gr.id
JOIN Supplier s ON gr.supplierId = s.id
WHERE gr.receiptDate BETWEEN :startDate AND :endDate
  AND gr.status = 'POSTED'
GROUP BY s.id, s.name
ORDER BY totalValue DESC
```

#### B. Theo M·∫∑t H√†ng

```sql
-- T∆∞∆°ng t·ª± nh∆∞ng GROUP BY materialId
```

#### C. Theo Nh√≥m V·∫≠t T∆∞

```sql
-- JOIN th√™m Material v√† Department, GROUP BY departmentId
```

### FR-4: Ph√¢n T√≠ch Xu·∫•t Kho - Logic

**Ngu·ªìn d·ªØ li·ªáu**: `GoodsIssueDetail` + `GoodsIssue` + `Material`

**Group By Options**:

#### A. Theo B·ªô M√¥n

```sql
SELECT
  d.value as departmentName,
  SUM(gid.quantity) as totalQuantity,
  SUM(gid.totalCost) as totalCost
FROM GoodsIssueDetail gid
JOIN GoodsIssue gi ON gid.goodsIssueId = gi.id
JOIN Material m ON gid.materialId = m.id
JOIN SystemDictionary d ON m.departmentId = d.id
WHERE gi.issueDate BETWEEN :startDate AND :endDate
  AND gi.status = 'POSTED'
GROUP BY d.id, d.value
ORDER BY totalCost DESC
```

#### B. Theo B√°c Sƒ©/Nh√¢n Vi√™n

```sql
SELECT
  e.name as employeeName,
  SUM(gid.quantity) as totalQuantity,
  SUM(gid.totalCost) as totalCost
FROM GoodsIssueDetail gid
JOIN GoodsIssue gi ON gid.goodsIssueId = gi.id
JOIN Employee e ON gi.employeeId = e.id
WHERE gi.issueDate BETWEEN :startDate AND :endDate
  AND gi.status = 'POSTED'
  AND gi.employeeId IS NOT NULL
GROUP BY e.id, e.name
ORDER BY totalCost DESC
```

#### C. Theo B·ªánh Nh√¢n

```sql
-- T∆∞∆°ng t·ª± nh∆∞ng JOIN Customer, filter gi.customerId IS NOT NULL
```

#### D. Theo M·∫∑t H√†ng

```sql
-- GROUP BY materialId
```

### FR-5: API Endpoints

```
# Th·∫ª kho
GET    /api/inventory/reports/stock-card?materialId=&startDate=&endDate=

# Ph√¢n t√≠ch nh·∫≠p
GET    /api/inventory/reports/purchase-analysis?startDate=&endDate=&groupBy=supplier|material|category

# Ph√¢n t√≠ch xu·∫•t
GET    /api/inventory/reports/usage-analysis?startDate=&endDate=&groupBy=department|employee|customer|material&beneficiaryType=all|employee|customer

# Xu·∫•t Excel
GET    /api/inventory/reports/:reportType/export-excel?...params
```

## üíæ Backend Implementation

### API 1: Stock Card

```typescript
async function getStockCard(
  materialId: number,
  startDate: Date,
  endDate: Date
) {
  // 1. T√≠nh t·ªìn ƒë·∫ßu k·ª≥
  const openingBalance = await prisma.stockMove.aggregate({
    where: {
      materialId,
      transactionDate: { lt: startDate },
    },
    _sum: { quantityChange: true },
  });

  const opening = openingBalance._sum.quantityChange || 0;

  // 2. L·∫•y giao d·ªãch trong k·ª≥
  const movements = await prisma.stockMove.findMany({
    where: {
      materialId,
      transactionDate: { gte: startDate, lte: endDate },
    },
    include: {
      goodsReceipt: { select: { code: true } },
      goodsIssue: { select: { code: true } },
    },
    orderBy: [{ transactionDate: "asc" }, { id: "asc" }],
  });

  // 3. T√≠nh running balance
  let runningBalance = opening;
  const details = movements.map((move) => {
    runningBalance += move.quantityChange;

    return {
      date: move.transactionDate,
      refNo: move.goodsReceiptId
        ? move.goodsReceipt?.code
        : move.goodsIssue?.code,
      type: move.type,
      quantityIn: move.quantityChange > 0 ? move.quantityChange : 0,
      quantityOut: move.quantityChange < 0 ? Math.abs(move.quantityChange) : 0,
      runningBalance,
    };
  });

  return {
    materialId,
    openingBalance: opening,
    details,
    closingBalance: runningBalance,
  };
}
```

### API 2 & 3: Analysis Reports (Flexible)

```typescript
async function getAnalysisReport(
  reportType: "purchase" | "usage",
  startDate: Date,
  endDate: Date,
  groupBy: string,
  filters?: any
) {
  // Dynamic query builder
  let query =
    reportType === "purchase"
      ? buildPurchaseQuery(groupBy, startDate, endDate)
      : buildUsageQuery(groupBy, startDate, endDate, filters);

  // Execute raw SQL ho·∫∑c Prisma query ph·ª©c t·∫°p
  const results = await prisma.$queryRaw(query);

  return results;
}

function buildUsageQuery(
  groupBy: string,
  start: Date,
  end: Date,
  filters?: any
) {
  let groupColumn, groupTable, joinClause;

  switch (groupBy) {
    case "department":
      groupColumn = "d.value";
      joinClause = `
        JOIN Material m ON gid.materialId = m.id
        JOIN SystemDictionary d ON m.departmentId = d.id
      `;
      break;
    case "employee":
      groupColumn = "e.name";
      joinClause = `JOIN Employee e ON gi.employeeId = e.id`;
      break;
    // ... c√°c case kh√°c
  }

  return Prisma.sql`
    SELECT 
      ${Prisma.raw(groupColumn)} as groupName,
      SUM(gid.quantity) as totalQuantity,
      SUM(gid.totalCost) as totalCost
    FROM GoodsIssueDetail gid
    JOIN GoodsIssue gi ON gid.goodsIssueId = gi.id
    ${Prisma.raw(joinClause)}
    WHERE gi.issueDate BETWEEN ${start} AND ${end}
      AND gi.status = 'POSTED'
    GROUP BY ${Prisma.raw(groupColumn)}
    ORDER BY totalCost DESC
  `;
}
```

### Export Excel

```typescript
import ExcelJS from "exceljs";

async function exportToExcel(reportData: any, reportType: string) {
  const workbook = new ExcelJS.Workbook();
  const worksheet = workbook.addWorksheet("B√°o C√°o");

  // Header row
  worksheet.columns = getColumnsForReportType(reportType);

  // Data rows
  reportData.forEach((row) => worksheet.addRow(row));

  // Styling
  worksheet.getRow(1).font = { bold: true };
  worksheet.getRow(1).fill = {
    type: "pattern",
    pattern: "solid",
    fgColor: { argb: "FFD9D9D9" },
  };

  // Auto-width
  worksheet.columns.forEach((column) => {
    column.width = column.header.length < 12 ? 12 : column.header.length + 2;
  });

  return workbook;
}
```

## üß™ Test Cases

### TC-1: Stock Card - Opening Balance

- **Setup**: 5 giao d·ªãch tr∆∞·ªõc startDate
- **Expected**: Opening balance = t·ªïng quantityChange c·ªßa 5 giao d·ªãch ƒë√≥

### TC-2: Stock Card - Running Balance

- **Setup**: Opening=20, Nh·∫≠p 30, Xu·∫•t 10
- **Expected**: D√≤ng cu·ªëi runningBalance = 40

### TC-3: Purchase Analysis - Group by Supplier

- **Setup**: 3 phi·∫øu nh·∫≠p t·ª´ 2 NCC
- **Expected**: 2 d√≤ng k·∫øt qu·∫£, t·ªïng ti·ªÅn ƒë√∫ng t·ª´ng NCC

### TC-4: Usage Analysis - Group by Department

- **Setup**: Xu·∫•t VT thu·ªôc 3 b·ªô m√¥n kh√°c nhau
- **Expected**: 3 d√≤ng k·∫øt qu·∫£, group ƒë√∫ng theo b·ªô m√¥n

### TC-5: Filter by beneficiary type

- **Input**: beneficiaryType=employee
- **Expected**: Ch·ªâ t√≠nh phi·∫øu xu·∫•t c√≥ employeeId != NULL

### TC-6: Export Excel format

- **Action**: Xu·∫•t b√°o c√°o ra Excel
- **Expected**: File .xlsx, header ƒë√∫ng, data ƒë·∫ßy ƒë·ªß, format s·ªë ƒë·∫πp

## üéØ Acceptance Criteria

### Th·∫ª Kho:

- [ ] Hi·ªÉn th·ªã t·ªìn ƒë·∫ßu k·ª≥ ch√≠nh x√°c
- [ ] Li·ªát k√™ t·∫•t c·∫£ giao d·ªãch trong k·ª≥ theo th·ªùi gian
- [ ] Running balance t√≠nh ƒë√∫ng t·ª´ng d√≤ng
- [ ] Hi·ªÉn th·ªã t·ªïng ph√°t sinh (t·ªïng nh·∫≠p, t·ªïng xu·∫•t)
- [ ] Link s·ªë ch·ª©ng t·ª´ m·ªü ƒë∆∞·ª£c phi·∫øu g·ªëc

### Ph√¢n T√≠ch Nh·∫≠p:

- [ ] Dropdown "Xem theo" ho·∫°t ƒë·ªông, data thay ƒë·ªïi theo l·ª±a ch·ªçn
- [ ] T·ªïng SL, T·ªïng GT t√≠nh ƒë√∫ng
- [ ] S·∫Øp x·∫øp theo T·ªïng GT gi·∫£m d·∫ßn m·∫∑c ƒë·ªãnh
- [ ] Xu·∫•t Excel ƒë·∫ßy ƒë·ªß

### Ph√¢n T√≠ch Xu·∫•t:

- [ ] L·ªçc "ƒê·ªëi t∆∞·ª£ng" ho·∫°t ƒë·ªông (T·∫•t c·∫£/BS/BN)
- [ ] Dropdown "Xem theo" linh ho·∫°t (B·ªô m√¥n/BS/BN/VT)
- [ ] T√≠nh t·ªïng gi√° v·ªën ch√≠nh x√°c (d√πng costPrice ƒë√≠ch danh)
- [ ] Hi·ªÉn th·ªã % t·ª∑ tr·ªçng (n·∫øu c√≥)
- [ ] Xu·∫•t Excel ƒë·∫ßy ƒë·ªß

### Performance:

- [ ] Th·∫ª kho: < 2s v·ªõi 1000 giao d·ªãch
- [ ] Analysis: < 3s v·ªõi 500 phi·∫øu xu·∫•t
- [ ] Export Excel: < 5s v·ªõi 2000 d√≤ng

## üìä Visualization (Optional - Phase 4)

C√°c b√°o c√°o ph√¢n t√≠ch c√≥ th·ªÉ t√≠ch h·ª£p bi·ªÉu ƒë·ªì:

- **Pie Chart**: Ph√¢n b·ªë chi ph√≠ theo b·ªô m√¥n
- **Bar Chart**: Top 10 v·∫≠t t∆∞ ti√™u hao nhi·ªÅu nh·∫•t
- **Line Chart**: Xu h∆∞·ªõng nh·∫≠p/xu·∫•t theo th·ªùi gian

Library: `recharts` ho·∫∑c `antd Charts`

---

**Priority**: üü° Medium-High (Ho√†n thi·ªán Giai ƒëo·∫°n 1)  
**Estimated Effort**: 4-5 ng√†y  
**Dependencies**: T·∫•t c·∫£ t√≠nh nƒÉng tr∆∞·ªõc (1.1 ‚Üí 1.7)

---

## üéâ K·∫æT TH√öC GIAI ƒêO·∫†N 1

Sau khi ho√†n th√†nh t√≠nh nƒÉng 1.8 n√†y, **H·ªÜ TH·ªêNG KHO ƒê√É HO√ÄN THI·ªÜN QUY TR√åNH C∆† B·∫¢N**:

‚úÖ C·∫•u h√¨nh danh m·ª•c (Dictionary, Supplier, Material)  
‚úÖ Nh·∫≠p kho v·ªõi l√¥/HSD (FIFO foundation)  
‚úÖ Xu·∫•t kho t·ª± ƒë·ªông FIFO + t√≠nh gi√° ƒë√≠ch danh  
‚úÖ Xem t·ªìn kho hi·ªán t·∫°i (Summary & Detail)  
‚úÖ C·∫£nh b√°o HSD & T·ªìn kho th·∫•p  
‚úÖ B√°o c√°o l·ªãch s·ª≠ & Ph√¢n t√≠ch to√†n di·ªán

**‚Üí C√≥ th·ªÉ nghi·ªám thu v√† ƒë∆∞a v√†o s·ª≠ d·ª•ng th·ª±c t·∫ø!**

**Giai ƒëo·∫°n 2** (t√πy ch·ªçn, m·ªü r·ªông sau):

- Ki·ªÉm k√™ kho
- ƒê·ªÅ xu·∫•t mua h√†ng th√¥ng minh
- Xu·∫•t tr·∫£ NCC
- Qu·∫£n l√Ω v·ªã tr√≠ kho
- T√≠ch h·ª£p v·ªõi module k·∫ø to√°n
